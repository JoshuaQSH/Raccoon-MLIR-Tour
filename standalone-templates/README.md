# Standalone Test for beginner

*## Test Suite*
`simplepass`: Reading file, [RUN PASS]
`standalone-opt`: conversion, [RUN PASS]

# Extension Tree for Standalone - `standalone-opt `

build_and_run.sh
├── cmake
│   └── modules
│       └── sanitizers.cmake
├── CMakeLists.txt
├── include
│   ├── CMakeLists.txt
│   └── Standalone
│       ├── CMakeLists.txt
│       ├── StandaloneDialect.h
│       ├── StandaloneDialect.td
│       ├── StandaloneOps.h
│       └── StandaloneOps.td
├── lib
│   ├── CMakeLists.txt
│   └── Standalone
│       ├── CMakeLists.txt
│       ├── StandaloneDialect.cpp
│       └── StandaloneOps.cpp
├── LICENSE.txt
├── README.md
├── standalone-opt
│   ├── CMakeLists.txt
│   └── standalone-opt.cpp
└── test
    ├── CMakeLists.txt
	    ├── lit.cfg.py
		    ├── lit.site.cfg.py.in
			    └── Standalone
				        └── dummy.mlir

Public dialects are typically separated into at least 3 directories:

- ./include/Dialect/Foo: For public include files
	- Include a ODS format TableGen file (`*.td`) for describing the operations in the dialect. 
		- Generate operation declarations like: `FooOps.h.inc`
		- definitions like: `FooOps.cpp.inc`
		- operation interface declarations like: `FooOpsInterfaces.h.inc` 
		- and definitions `FooOpsInterfaces.cpp.inc`.
- ./include/mlir/Conversion: should include the conversion passes dir
- ./lib/Dialect/Foo: For sources
	- Contains `FooDialect.cpp` and `FooOps.cpp`, or even with `FooInterfaces.cpp`
- ./lib/Dialect/Foo/IR: For operations
	- Contains implementations of functions for the dialect which are not automatically generated by ODS. 
	- Typically defined in `FooDialect.cpp`, which includes `FooOps.cpp.inc` and `FooOpsInterfaces.h.inc`.
- ./lib/Dialect/Foo/Transforms: For transforms
	- Contains rewrite rules for the dialect, typically described in TableGen file using the DDR format.
- ./lib/Conversion: 
- ./test/Dialect/Foo: For tests
- What CMakeLists should include: 
	- TableGen Targets: `add_mlir_dialect()` declares XXXOps.td
	- `mlir_tablegen`
	- `add_public_tablegen_target`

Conversion passes should live separately from conversions themselves for convenience of users that only care about a pass and not about its implementation with patterns or other infrastructure. 
For example `include/mlir/VectorToLLVM/VectorToLLVMPass.h`.
